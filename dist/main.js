!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r,o){var i=e.name,a=e.link,s=e.likes,u=e._id,c=e.owner;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._text=i,this._link=a,this._likes=s.length,this._cardId=u,this._ownerId=c._id,this._selector=n,this._element=null,this._handleCardClick=r,this._handleBinClick=o}var n,r;return n=t,(r=[{key:"_deleteCard",value:function(){this._element.remove()}},{key:"_likeCard",value:function(e){e.target.classList.toggle("cards__like-button_active")}},{key:"_enlargePhoto",value:function(e){this._handleCardClick(e)}},{key:"_setEventListeners",value:function(){var e=this,t=this._element.querySelector(".cards__photo");this._element.querySelector(".cards__like-button").addEventListener("click",(function(t){return e._likeCard(t)})),t.addEventListener("click",(function(t){return e._enlargePhoto(t)}))}},{key:"_getTemplate",value:function(){return document.querySelector("".concat(this._selector)).content.querySelector(".cards__item").cloneNode(!0)}},{key:"_getBinTemplate",value:function(){return document.querySelector("#binTemplate").content.querySelector(".cards__close-button").cloneNode(!0)}},{key:"_setBinListener",value:function(){var e=this;this._binIcon.addEventListener("click",(function(t){return e._handleBinClick(t)}))}},{key:"_addBin",value:function(){this._element.prepend(this._binIcon)}},{key:"getCard",value:function(e){this._element=this._getTemplate(),e===this._ownerId&&(this._binIcon=this._getBinTemplate(),this._setBinListener(),this._addBin()),this._setEventListeners();var t=this._element.querySelector(".cards__photo"),n=this._element.querySelector(".cards__name"),r=this._element.querySelector(".cards__like-count");return this._element.id=this._cardId,t.src=this._link,t.alt=this._text,n.textContent=this._text,r.textContent=this._likes,this._element}}])&&e(n.prototype,r),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=n,this._submit=this._form.querySelector(this._submitButtonSelector)}var t,r;return t=e,(r=[{key:"_disableButton",value:function(){this._submit.classList.add(this._inactiveButtonClass),this._submit.setAttribute("disabled",!0)}},{key:"_toggleButton",value:function(){this._allInputs.every((function(e){return!0===e.validity.valid}))?(this._submit.classList.remove(this._inactiveButtonClass),this._submit.removeAttribute("disabled",!1)):this._disableButton()}},{key:"_showError",value:function(e){var t=this._form.querySelector("#".concat(e.id,"-error")),n=e.validationMessage;e.classList.add(this._inputErrorClass),t.textContent=n,t.classList.add(this._errorClass)}},{key:"_hideError",value:function(e){var t=this._form.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}},{key:"_checkValidity",value:function(e){e.validity.valid?this._hideError(e):this._showError(e)}},{key:"_setListeners",value:function(e){var t=this;e.addEventListener("input",(function(){t._checkValidity(e),t._toggleButton()}))}},{key:"resetValidation",value:function(){var e=this;this._disableButton(),this._allInputs.forEach((function(t){e._hideError(t)}))}},{key:"enableValidation",value:function(){var e=this;this._allInputs=Array.from(this._form.querySelectorAll(this._inputSelector)),this._allInputs.forEach((function(t){e._setListeners(t)}))}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector("".concat(n))}var t,n;return t=e,(n=[{key:"renderElements",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&o(t.prototype,n),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_active"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_active"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("click",(function(t){(t.target.classList.contains("popup__close")||t.target.classList.contains("popup_active"))&&e.close()}))}}])&&a(t.prototype,n),e}();function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(o){var n=h(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return p(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._imgElement=t._popup.querySelector(".popup__image"),t._imgCaption=t._popup.querySelector(".popup__caption"),t}return t=a,(n=[{key:"open",value:function(e){var t=e.link,n=e.name;this._imgElement.src=t,this._imgElement.alt=n,this._imgCaption.textContent=n,l(h(a.prototype),"open",this).call(this)}}])&&c(t.prototype,n),a}(s);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return(m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(o){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function a(e,t){var n,r=e.formSelector,o=e.formSubmission;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,t))._form=n._popup.querySelector(r),n._handleFormSubmission=o,n._inputList=n._form.querySelectorAll(".popup__input"),n}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){return e._formValues[t.name]=t.value})),this._formValues}},{key:"setInputs",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"setEventListeners",value:function(){var e=this;this._submitFunction=function(t){t.preventDefault(),e._handleFormSubmission(e._getInputValues())},m(g(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",this._submitFunction)}},{key:"close",value:function(){this._form.reset(),m(g(a.prototype),"close",this).call(this)}}])&&y(t.prototype,n),a}(s);function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E=function(){function e(t){var n=t.nameSelector,r=t.aboutSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=document.querySelector(n),this._about=document.querySelector(r),this._profile=null}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return this._profile={name:this._name.textContent,about:this._about.textContent},this._profile}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;this._name.textContent=t,this._about.textContent=n}}])&&S(t.prototype,n),e}();function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var C=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._auth=t.headers.authorization,this._headers=t.headers}var t,n;return t=e,(n=[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject()}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/users/me"),{headers:{authorization:this._auth}}).then((function(t){return e._handleResponse(t)}))}},{key:"getCards",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{headers:{authorization:this._auth}}).then((function(t){return e._handleResponse(t)}))}},{key:"updateProfile",value:function(e){var t=this,n=e.name,r=e.about;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:this._auth,"Content-Type":"application/json"},body:JSON.stringify({name:n,about:r})}).then((function(e){return t._handleResponse(e)}))}},{key:"addCard",value:function(e,t){var n=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:{authorization:this._auth,"Content-Type":"application/json"},body:JSON.stringify({name:e,link:t})}).then((function(e){return n._handleResponse(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this._auth}}).then((function(e){return t._handleResponse(e)}))}}])&&w(t.prototype,n),e}(),O=document.querySelector("#profile-popup"),L=document.querySelector("#place-popup"),P=document.querySelector("#profile-pic"),j=document.querySelector(".profile__add-button"),q=document.querySelector(".profile__edit-button"),T=document.querySelector(".profile__avatar-btn"),I=document.querySelector(".profile__avatar"),B={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit",inactiveButtonClass:"popup__submit_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},R=null,U=null,x=null,V=function(e,n,r,o){return new t(e,n,r,o)},N=function(e){var t={name:e.target.alt,link:e.target.src};X.open(t)},z={formSelector:"#profile-pic",formSubmission:function(e){e.pic,console.log("UNDER CONSTRUCTION"),W.close()}},A={formSelector:"#profile-popup",formSubmission:function(e){var t=e.name,n=e.about;K.setUserInfo({name:t,about:n}),$.updateProfile(K.getUserInfo()).then((function(e){e&&console.log("All good.")})).catch((function(){console.log("Failed to update the profile")})),Q.close()}},D={formSelector:"#place-popup",formSubmission:function(e){var t=e.title,n=e.link,r=V({name:t,link:n},"#cardTemplate",N);U.addItem(r.getCard()),$.addCard(t,n).then((function(e){console.log("New card was added")})).catch((function(){console.log("Failed to add new card")})),Y.close()}},F={formSelector:"#confirm-form",formSubmission:function(){Z.close(),$.deleteCard(R.id).then((function(e){console.log("Card deleted from server")})).catch((function(){console.log("Card failed to delete from the server")})),R.remove()}},J=function(e){console.log(e.target.parentElement),R=e.target.parentElement,Z.open()},H=new r(B,O),M=new r(B,L),G=new r(B,P),K=new E({nameSelector:".profile__name",aboutSelector:".profile__about"}),Q=new k(A,"#editProfile"),W=new k(z,"#profilePicPopup"),X=new d("#photo"),Y=new k(D,"#newPlace"),Z=new k(F,"#confirmPopup"),$=new C({baseUrl:"https://around.nomoreparties.co/v1/group-10",headers:{authorization:"2a32e80d-c23f-4ed9-9cf5-671c417d0702","Content-Type":"application/json"}});$.getUserInfo().then((function(e){K.setUserInfo(e),x=e._id,I.src=e.avatar})).catch((function(){console.log("User info failed to load")})),$.getCards().then((function(e){var t={items:e,renderer:function(e){var t=V(e,"#cardTemplate",N,J);U.addItem(t.getCard(x))}};(U=new i(t,".cards")).renderElements()})).catch((function(){console.log("The cards failed to load")})),Q.setEventListeners(),Y.setEventListeners(),X.setEventListeners(),W.setEventListeners(),Z.setEventListeners(),H.enableValidation(),M.enableValidation(),G.enableValidation(),T.addEventListener("click",(function(){G.resetValidation(),W.open()})),q.addEventListener("click",(function(){H.resetValidation(),Q.setInputs(K.getUserInfo()),Q.open()})),j.addEventListener("click",(function(){M.resetValidation(),Y.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWtCUSxrQkFDbEJkLEVBQVduQixVIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2UvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgbGluaywgbGlrZXMsIF9pZCwgb3duZXIgfSwgc2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlQmluQ2xpY2spIHtcbiAgICB0aGlzLl90ZXh0ID0gbmFtZTtcbiAgICB0aGlzLl9saW5rID0gbGluaztcbiAgICB0aGlzLl9saWtlcyA9IGxpa2VzLmxlbmd0aDtcbiAgICB0aGlzLl9jYXJkSWQgPSBfaWQ7XG4gICAgdGhpcy5fb3duZXJJZCA9IG93bmVyLl9pZDtcbiAgICB0aGlzLl9zZWxlY3RvciA9IHNlbGVjdG9yO1xuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVCaW5DbGljayA9IGhhbmRsZUJpbkNsaWNrO1xuICB9XG5cblxuICBfZGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICB9XG5cblxuICBfbGlrZUNhcmQoZSkge1xuICAgIGUudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2NhcmRzX19saWtlLWJ1dHRvbl9hY3RpdmUnKTtcbiAgfVxuXG5cbiAgX2VubGFyZ2VQaG90byhlKSB7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKGUpO1xuICB9XG5cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgY29uc3QgcGhvdG8gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19fcGhvdG8nKTtcbiAgICAvL2NvbnN0IGNsb3NlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHNfX2Nsb3NlLWJ1dHRvbicpOyBcbiAgICBjb25zdCBsaWtlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHNfX2xpa2UtYnV0dG9uJyk7XG4gICAgXG5cbiAgICAvL2Nsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKGUpKTtcbiAgICBsaWtlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHRoaXMuX2xpa2VDYXJkKGUpKTtcbiAgICBwaG90by5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB0aGlzLl9lbmxhcmdlUGhvdG8oZSkpO1xuICB9XG5cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgJHt0aGlzLl9zZWxlY3Rvcn1gKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkc19faXRlbScpLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkVGVtcGxhdGU7XG4gIH1cblxuXG4gIF9nZXRCaW5UZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBiaW5UZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNiaW5UZW1wbGF0ZScpLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLmNhcmRzX19jbG9zZS1idXR0b24nKS5jbG9uZU5vZGUodHJ1ZSk7XG5cbiAgICByZXR1cm4gYmluVGVtcGxhdGU7XG4gIH1cblxuICBfc2V0QmluTGlzdGVuZXIoKSB7XG4gICAgdGhpcy5fYmluSWNvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB0aGlzLl9oYW5kbGVCaW5DbGljayhlKSk7XG4gIH1cblxuICBfYWRkQmluKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucHJlcGVuZCh0aGlzLl9iaW5JY29uKTtcbiAgfVxuICBcbiAgZ2V0Q2FyZChteUlkKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG5cbiAgICBpZiAobXlJZCA9PT0gdGhpcy5fb3duZXJJZCl7XG4gICAgICB0aGlzLl9iaW5JY29uID0gdGhpcy5fZ2V0QmluVGVtcGxhdGUoKTtcbiAgICAgIHRoaXMuX3NldEJpbkxpc3RlbmVyKCk7XG4gICAgICB0aGlzLl9hZGRCaW4oKTtcbiAgICB9XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIFxuICAgIGNvbnN0IGNhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRzX19waG90bycpO1xuICAgIGNvbnN0IGNhcmROYW1lID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHNfX25hbWUnKTtcbiAgICBjb25zdCBsaWtlRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRzX19saWtlLWNvdW50Jyk7XG5cbiAgICB0aGlzLl9lbGVtZW50LmlkID0gdGhpcy5fY2FyZElkO1xuICAgIGNhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIGNhcmRJbWFnZS5hbHQgPSB0aGlzLl90ZXh0O1xuICAgIGNhcmROYW1lLnRleHRDb250ZW50ID0gdGhpcy5fdGV4dDtcbiAgICBsaWtlRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm0pIHtcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBzZXR0aW5ncy5mb3JtU2VsZWN0b3I7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG5cbiAgICB0aGlzLl9mb3JtID0gZm9ybTtcbiAgICB0aGlzLl9zdWJtaXQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG5cbiAgX2Rpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b24oKSB7XG4gICAgY29uc3QgdmFsaWQgPSB0aGlzLl9hbGxJbnB1dHMuZXZlcnkoaW5wdXQgPT4gaW5wdXQudmFsaWRpdHkudmFsaWQgPT09IHRydWUpO1xuXG4gICAgaWYgKHZhbGlkKXtcbiAgICAgIHRoaXMuX3N1Ym1pdC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fc3VibWl0LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5fZGlzYWJsZUJ1dHRvbigpO1xuICAgIH1cbiAgfVxuXG4gIF9zaG93RXJyb3IoaW5wdXQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlO1xuXG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlRXJyb3IoaW5wdXQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApO1xuXG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2NoZWNrVmFsaWRpdHkoaW5wdXQpIHtcbiAgICBpZiAoaW5wdXQudmFsaWRpdHkudmFsaWQpe1xuICAgICAgdGhpcy5faGlkZUVycm9yKGlucHV0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLl9zaG93RXJyb3IoaW5wdXQpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRMaXN0ZW5lcnMoaW5wdXQpIHtcblxuXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICB0aGlzLl9jaGVja1ZhbGlkaXR5KGlucHV0KTtcbiAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvbigpO1xuICAgIH0pO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcbiAgICB0aGlzLl9hbGxJbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICB0aGlzLl9oaWRlRXJyb3IoaW5wdXQpOyAgIC8vIF9oaWRFcnJvciB0YWtlcyBpbnB1dCAmIGVycm9yIGVsZW1lbnQuXG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2FsbElucHV0cyA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcblxuXG4gICAgdGhpcy5fYWxsSW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgdGhpcy5fc2V0TGlzdGVuZXJzKGlucHV0KTtcbiAgICB9KTtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBzZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAke3NlbGVjdG9yfWApO1xuICB9XG4gIHJlbmRlckVsZW1lbnRzKCkge1xuICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9hY3RpdmUnKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX2FjdGl2ZScpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cbiAgX2hhbmRsZUVzY0Nsb3NlKGUpIHtcbiAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKXtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZScpIHx8IGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfYWN0aXZlJykpe1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICAgIFxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG5cbiAgICAgICAgdGhpcy5faW1nRWxlbWVudCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcbiAgICAgICAgdGhpcy5faW1nQ2FwdGlvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2FwdGlvbicpO1xuICAgIH1cbiAgICBvcGVuKHsgbGluaywgbmFtZSB9KSB7XG4gICAgICB0aGlzLl9pbWdFbGVtZW50LnNyYyA9IGxpbms7XG4gICAgICB0aGlzLl9pbWdFbGVtZW50LmFsdCA9IG5hbWU7XG4gICAgICB0aGlzLl9pbWdDYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuXG4gICAgY29uc3RydWN0b3IoeyBmb3JtU2VsZWN0b3IsIGZvcm1TdWJtaXNzaW9uIH0sIHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKGZvcm1TZWxlY3Rvcik7XG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXNzaW9uID0gZm9ybVN1Ym1pc3Npb247XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xuICAgIH1cblxuXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xuICAgICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4gdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKTtcblxuICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gICAgfVxuXG5cbiAgICBzZXRJbnB1dHModmFsdWVzT2JqKSB7XG4gICAgICBcbiAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgICBpdGVtLnZhbHVlID0gdmFsdWVzT2JqW2l0ZW0ubmFtZV07XG4gICAgICB9KTtcbiAgICB9XG5cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgdGhpcy5fc3VibWl0RnVuY3Rpb24gPSAoZSkgPT4ge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXNzaW9uKHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgfVxuXG4gICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLl9zdWJtaXRGdW5jdGlvbik7XG4gICAgfVxuXG5cbiAgICBjbG9zZSgpIHtcbiAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGFib3V0U2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX25hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0U2VsZWN0b3IpO1xuICAgIHRoaXMuX3Byb2ZpbGUgPSBudWxsO1xuICB9XG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHRoaXMuX3Byb2ZpbGUgPSB7IFxuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcbiAgICAgIGFib3V0OiB0aGlzLl9hYm91dC50ZXh0Q29udGVudFxuICAgIH07XG4gICAgcmV0dXJuIHRoaXMuX3Byb2ZpbGU7XG4gIH1cbiAgc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fYWJvdXQudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzKSB7XG4gICAgdGhpcy5fYmFzZVVybCA9IHNldHRpbmdzLmJhc2VVcmw7XG4gICAgdGhpcy5fYXV0aCA9IHNldHRpbmdzLmhlYWRlcnMuYXV0aG9yaXphdGlvbjtcbiAgICB0aGlzLl9oZWFkZXJzID0gc2V0dGluZ3MuaGVhZGVycztcbiAgfVxuXG4gIF9oYW5kbGVSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKXtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aFxuICAgICAgfVxuICAgIH0pXG4gICAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVSZXNwb25zZShyZXMpO1xuICAgICAgfSk7XG4gIH1cblxuICBnZXRDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhcbiAgICAgIH1cbiAgICB9KVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5faGFuZGxlUmVzcG9uc2UocmVzKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgdXBkYXRlUHJvZmlsZSh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aCxcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGFib3V0XG4gICAgICB9KVxuICAgIH0pXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcyk7XG4gICAgfSlcbiAgfVxuXG4gIGFkZENhcmQobmFtZSwgbGluaykge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGgsXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBsaW5rXG4gICAgICB9KVxuICAgIH0pXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcyk7XG4gICAgfSlcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aFxuICAgICAgfVxuICAgIH0pXG4gICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuX2hhbmRsZVJlc3BvbnNlKHJlcyk7XG4gICAgfSlcbiAgfVxufSIsImV4cG9ydCBjb25zdCB1c2VySW5mb0Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvZmlsZS1wb3B1cCcpO1xuZXhwb3J0IGNvbnN0IG5ld1BsYWNlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwbGFjZS1wb3B1cCcpO1xuZXhwb3J0IGNvbnN0IG5ld1BpY0Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvZmlsZS1waWMnKTtcbmV4cG9ydCBjb25zdCBhZGRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xuZXhwb3J0IGNvbnN0IGVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZWRpdC1idXR0b24nKTtcbmV4cG9ydCBjb25zdCBwaWNCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLWJ0bicpO1xuZXhwb3J0IGNvbnN0IGF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKTtcblxuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX3N1Ym1pdFwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19zdWJtaXRfZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIlxufTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVTZWxlY3RvcnMgPSB7XG4gIG5hbWVTZWxlY3RvcjogJy5wcm9maWxlX19uYW1lJyxcbiAgYWJvdXRTZWxlY3RvcjogJy5wcm9maWxlX19hYm91dCdcbn07IiwiaW1wb3J0IENhcmQgZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCBBcGkgZnJvbScuLi9jb21wb25lbnRzL0FwaS5qcyc7XG5pbXBvcnQgJy4vaW5kZXguY3NzJztcblxuaW1wb3J0IHsgcGljQnRuLCBlZGl0QnRuLCBhZGRCdG4sIHNldHRpbmdzLCBuZXdQaWNGb3JtLCB1c2VySW5mb0Zvcm0sIG5ld1BsYWNlRm9ybSwgcHJvZmlsZVNlbGVjdG9ycywgYXZhdGFyIH0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcblxuXG5sZXQgY2FyZFRvRGVsZXRlID0gbnVsbDtcbmxldCBjYXJkcyA9IG51bGw7XG5sZXQgbXlJZCA9IG51bGw7XG5cblxuY29uc3QgY3JlYXRlQ2FyZCA9IChjYXJkSW5mbywgY2FyZFNlbGVjdG9yLCBjYXJkQ2xpY2ssIGRlbGV0ZUNsaWNrKSA9PiB7XG4gIHJldHVybiBuZXcgQ2FyZChjYXJkSW5mbywgY2FyZFNlbGVjdG9yLCBjYXJkQ2xpY2ssIGRlbGV0ZUNsaWNrKTtcbn1cblxuY29uc3QgaGFuZGxlQ2FyZENsaWNrID0gKGUpID0+IHtcbiAgY29uc3QgY2xpY2tlZFBob3RvID0geyBuYW1lOiBlLnRhcmdldC5hbHQsIGxpbms6IGUudGFyZ2V0LnNyYyB9XG4gIGltYWdlUG9wdXAub3BlbihjbGlja2VkUGhvdG8pO1xufVxuXG5cbmNvbnN0IG5ld1BpY0luZm8gPSB7XG4gIGZvcm1TZWxlY3RvcjogJyNwcm9maWxlLXBpYycsXG4gIGZvcm1TdWJtaXNzaW9uOiAoeyBwaWMgfSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKCdVTkRFUiBDT05TVFJVQ1RJT04nKTtcbiAgICBuZXdQaWNQb3B1cC5jbG9zZSgpO1xuICB9XG59XG5cbmNvbnN0IHByb2ZpbGVGb3JtSW5mbyA9IHtcbiAgZm9ybVNlbGVjdG9yOiAnI3Byb2ZpbGUtcG9wdXAnLFxuICBmb3JtU3VibWlzc2lvbjogKHsgbmFtZSwgYWJvdXQgfSkgPT4ge1xuICAgIHVzZXJQcm9maWxlLnNldFVzZXJJbmZvKHsgbmFtZTogbmFtZSwgYWJvdXQ6IGFib3V0IH0pO1xuXG4gICAgYXBpLnVwZGF0ZVByb2ZpbGUodXNlclByb2ZpbGUuZ2V0VXNlckluZm8oKSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgaWYgKHJlcyl7XG4gICAgICAgICAgY29uc29sZS5sb2coYEFsbCBnb29kLmApO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYEZhaWxlZCB0byB1cGRhdGUgdGhlIHByb2ZpbGVgKTtcbiAgICAgIH0pO1xuXG4gICAgcHJvZmlsZVBvcHVwLmNsb3NlKCk7XG4gICAgXG4gIH1cbn07XG5cbmNvbnN0IHBsYWNlRm9ybUluZm8gPSB7XG4gIGZvcm1TZWxlY3RvcjogJyNwbGFjZS1wb3B1cCcsXG4gIGZvcm1TdWJtaXNzaW9uOiAoeyB0aXRsZTogbmFtZSwgbGluazogbGluayB9KSA9PiB7XG5cbiAgICBjb25zdCBhZGRDYXJkID0gY3JlYXRlQ2FyZCh7IG5hbWUsIGxpbmsgfSwgJyNjYXJkVGVtcGxhdGUnLCBoYW5kbGVDYXJkQ2xpY2spO1xuICAgIGNhcmRzLmFkZEl0ZW0oYWRkQ2FyZC5nZXRDYXJkKCkpO1xuXG4gICAgYXBpLmFkZENhcmQobmFtZSwgbGluaylcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ05ldyBjYXJkIHdhcyBhZGRlZCcpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gYWRkIG5ldyBjYXJkJyk7XG4gICAgICB9KTtcblxuICAgIHBsYWNlUG9wdXAuY2xvc2UoKTtcbiAgICBcbiAgfVxufTtcblxuY29uc3QgZGVsZXRlUG9wdXBJbmZvID0ge1xuICBmb3JtU2VsZWN0b3I6ICcjY29uZmlybS1mb3JtJyxcbiAgZm9ybVN1Ym1pc3Npb246ICgpID0+IHtcblxuICAgIGRlbGV0ZVBvcHVwLmNsb3NlKCk7XG4gICAgXG4gICAgYXBpLmRlbGV0ZUNhcmQoY2FyZFRvRGVsZXRlLmlkKVxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhgQ2FyZCBkZWxldGVkIGZyb20gc2VydmVyYCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKCgpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coYENhcmQgZmFpbGVkIHRvIGRlbGV0ZSBmcm9tIHRoZSBzZXJ2ZXJgKTtcbiAgICAgIH0pO1xuICAgIC8vIGRlbGV0ZSBjYXJkIGZyb20gcGFnZVxuICAgIFxuICAgIGNhcmRUb0RlbGV0ZS5yZW1vdmUoKTtcbiAgXG4gIH1cbn1cblxuXG5jb25zdCBoYW5kbGVCaW5DbGljayA9IChlKSA9PiB7XG4gIGNvbnNvbGUubG9nKGUudGFyZ2V0LnBhcmVudEVsZW1lbnQpO1xuICBjYXJkVG9EZWxldGUgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50O1xuICBkZWxldGVQb3B1cC5vcGVuKCk7XG59XG5cblxuY29uc3QgcHJvZmlsZVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCB1c2VySW5mb0Zvcm0pO1xuY29uc3QgbmV3UGxhY2VWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgbmV3UGxhY2VGb3JtKTtcbmNvbnN0IG5ld1BpY1ZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBuZXdQaWNGb3JtKTtcbmNvbnN0IHVzZXJQcm9maWxlID0gbmV3IFVzZXJJbmZvKHByb2ZpbGVTZWxlY3RvcnMpO1xuY29uc3QgcHJvZmlsZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0ocHJvZmlsZUZvcm1JbmZvLCAnI2VkaXRQcm9maWxlJyk7XG5jb25zdCBuZXdQaWNQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKG5ld1BpY0luZm8sICcjcHJvZmlsZVBpY1BvcHVwJylcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJyNwaG90bycpO1xuY29uc3QgcGxhY2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHBsYWNlRm9ybUluZm8sICcjbmV3UGxhY2UnKTtcbmNvbnN0IGRlbGV0ZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oZGVsZXRlUG9wdXBJbmZvLCcjY29uZmlybVBvcHVwJyk7XG5cblxuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEwXCIsXG4gIGhlYWRlcnM6IHtcbiAgICAgIGF1dGhvcml6YXRpb246IFwiMmEzMmU4MGQtYzIzZi00ZWQ5LTljZjUtNjcxYzQxN2QwNzAyXCIsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH1cbn0pO1xuXG5hcGkuZ2V0VXNlckluZm8oKVxuICAudGhlbigocmVzKSA9PiB7XG4gICAgdXNlclByb2ZpbGUuc2V0VXNlckluZm8ocmVzKTtcbiAgICBteUlkID0gcmVzLl9pZDtcbiAgICBhdmF0YXIuc3JjID0gcmVzLmF2YXRhcjtcbiAgfSlcbiAgLmNhdGNoKCgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhgVXNlciBpbmZvIGZhaWxlZCB0byBsb2FkYCk7XG4gIH0pO1xuXG5cblxuYXBpLmdldENhcmRzKClcbiAgLnRoZW4oKHJlcykgPT4ge1xuXG4gICAgY29uc3Qgc2VjdGlvbkluZm8gPSB7XG4gICAgICBpdGVtczogcmVzLCBcbiAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuXG4gICAgICAgIGNvbnN0IG5ld0NhcmQgPSBjcmVhdGVDYXJkKGl0ZW0sICcjY2FyZFRlbXBsYXRlJywgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVCaW5DbGljayk7XG4gICAgICAgIGNhcmRzLmFkZEl0ZW0obmV3Q2FyZC5nZXRDYXJkKG15SWQpKTtcbiAgICAgIH1cblxuICAgIH07XG5cbiAgICBjYXJkcyA9IG5ldyBTZWN0aW9uKHNlY3Rpb25JbmZvLCAnLmNhcmRzJyk7XG4gICAgY2FyZHMucmVuZGVyRWxlbWVudHMoKTtcbiAgfSlcbiAgLmNhdGNoKCgpID0+IHtcbiAgICBjb25zb2xlLmxvZyhgVGhlIGNhcmRzIGZhaWxlZCB0byBsb2FkYCk7XG4gIH0pO1xuXG5cblxucHJvZmlsZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wbGFjZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5uZXdQaWNQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuZGVsZXRlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxucHJvZmlsZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5uZXdQbGFjZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5uZXdQaWNWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5waWNCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIG5ld1BpY1ZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgbmV3UGljUG9wdXAub3BlbigpO1xufSk7XG5cbmVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIHByb2ZpbGVWYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG4gIHByb2ZpbGVQb3B1cC5zZXRJbnB1dHModXNlclByb2ZpbGUuZ2V0VXNlckluZm8oKSk7XG4gIHByb2ZpbGVQb3B1cC5vcGVuKCk7XG59KTtcblxuYWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBuZXdQbGFjZVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgcGxhY2VQb3B1cC5vcGVuKCk7XG59KTsiXSwibmFtZXMiOlsiQ2FyZCIsInNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlQmluQ2xpY2siLCJuYW1lIiwibGluayIsImxpa2VzIiwiX2lkIiwib3duZXIiLCJ0aGlzIiwiX3RleHQiLCJfbGluayIsIl9saWtlcyIsImxlbmd0aCIsIl9jYXJkSWQiLCJfb3duZXJJZCIsIl9zZWxlY3RvciIsIl9lbGVtZW50IiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVCaW5DbGljayIsInJlbW92ZSIsImUiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJwaG90byIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiX2xpa2VDYXJkIiwiX2VubGFyZ2VQaG90byIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9iaW5JY29uIiwicHJlcGVuZCIsIm15SWQiLCJfZ2V0VGVtcGxhdGUiLCJfZ2V0QmluVGVtcGxhdGUiLCJfc2V0QmluTGlzdGVuZXIiLCJfYWRkQmluIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiY2FyZEltYWdlIiwiY2FyZE5hbWUiLCJsaWtlRWxlbWVudCIsImlkIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtIiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiX3N1Ym1pdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsIl9hbGxJbnB1dHMiLCJldmVyeSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsInJlbW92ZUF0dHJpYnV0ZSIsIl9kaXNhYmxlQnV0dG9uIiwiZXJyb3JFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUVycm9yIiwiX3Nob3dFcnJvciIsIl9jaGVja1ZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvbiIsImZvckVhY2giLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3NldExpc3RlbmVycyIsIlNlY3Rpb24iLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJlbGVtZW50IiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJjbG9zZSIsImNvbnRhaW5zIiwiUG9wdXBXaXRoSW1hZ2UiLCJfaW1nRWxlbWVudCIsIl9pbWdDYXB0aW9uIiwiUG9wdXBXaXRoRm9ybSIsImZvcm1TdWJtaXNzaW9uIiwiX2hhbmRsZUZvcm1TdWJtaXNzaW9uIiwiX2lucHV0TGlzdCIsIl9mb3JtVmFsdWVzIiwidmFsdWUiLCJ2YWx1ZXNPYmoiLCJfc3VibWl0RnVuY3Rpb24iLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJhYm91dFNlbGVjdG9yIiwiX25hbWUiLCJfYWJvdXQiLCJfcHJvZmlsZSIsImFib3V0IiwiQXBpIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2F1dGgiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsIl9oZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsImZldGNoIiwidGhlbiIsIl9oYW5kbGVSZXNwb25zZSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY2FyZElkIiwidXNlckluZm9Gb3JtIiwibmV3UGxhY2VGb3JtIiwibmV3UGljRm9ybSIsImFkZEJ0biIsImVkaXRCdG4iLCJwaWNCdG4iLCJhdmF0YXIiLCJjYXJkVG9EZWxldGUiLCJjYXJkcyIsImNyZWF0ZUNhcmQiLCJjYXJkSW5mbyIsImNhcmRTZWxlY3RvciIsImNhcmRDbGljayIsImRlbGV0ZUNsaWNrIiwiY2xpY2tlZFBob3RvIiwiaW1hZ2VQb3B1cCIsIm9wZW4iLCJuZXdQaWNJbmZvIiwicGljIiwiY29uc29sZSIsImxvZyIsIm5ld1BpY1BvcHVwIiwicHJvZmlsZUZvcm1JbmZvIiwidXNlclByb2ZpbGUiLCJzZXRVc2VySW5mbyIsImFwaSIsInVwZGF0ZVByb2ZpbGUiLCJnZXRVc2VySW5mbyIsImNhdGNoIiwicHJvZmlsZVBvcHVwIiwicGxhY2VGb3JtSW5mbyIsInRpdGxlIiwiYWRkQ2FyZCIsImFkZEl0ZW0iLCJnZXRDYXJkIiwicGxhY2VQb3B1cCIsImRlbGV0ZVBvcHVwSW5mbyIsImRlbGV0ZVBvcHVwIiwiZGVsZXRlQ2FyZCIsInBhcmVudEVsZW1lbnQiLCJwcm9maWxlVmFsaWRhdG9yIiwibmV3UGxhY2VWYWxpZGF0b3IiLCJuZXdQaWNWYWxpZGF0b3IiLCJnZXRDYXJkcyIsInNlY3Rpb25JbmZvIiwibmV3Q2FyZCIsInJlbmRlckVsZW1lbnRzIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJlbmFibGVWYWxpZGF0aW9uIiwicmVzZXRWYWxpZGF0aW9uIiwic2V0SW5wdXRzIl0sInNvdXJjZVJvb3QiOiIifQ==